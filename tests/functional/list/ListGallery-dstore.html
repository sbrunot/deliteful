<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
	<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"/>
	<meta name="apple-mobile-web-app-capable" content="yes"/>
	<title>Lists</title>

	<script type="text/javascript" src="../../../delite/tests/boilerplate.js"></script>

	<script type="text/javascript">
		var items = 
		require([
		    "dojo/_base/declare",
			"dojo/on",
			"dstore/Memory",
			"dstore/Observable",
			"delite/register",
			"deliteful/list/List"
		], function (declare, on, MemoryStore, Observable, register, List) {
  			var i, list;
			var ObservableStore = declare([MemoryStore, Observable], {});
  			globalStore = new ObservableStore({data: []});

  			// Programmatic list: default store, items added before adding the list to the document and before startup
			list = register.createElement("d-list");
			list.id = "list-prog-1";
			list.pageLength = 20;
			list.style.height = "200px";
 			for (i = 0; i < 100; i++) {
				list.store.add({label: "Programmatic item of order " + i});
			}
			document.getElementById("list1Placeholder").appendChild(list);
			list.startup();

  			// Programmatic list: default store, items added after the list startup and after adding the list to the document
			list = register.createElement("d-list");
			list.id = "list-prog-2";
			list.style.height = "200px";
			list.startup();
			document.getElementById("list2Placeholder").appendChild(list);
  			for (i = 0; i < 100; i++) {
				list.store.add({label: "Programmatic item of order " + i});
			}

  			// Programmatic list: memory store, items added before adding the list to the document and before startup
			list = register.createElement("d-list");
			list.id = "list-prog-3";
			list.pageLength = 20;
			list.style.height = "200px";
			list.store = new ObservableStore({data: [], idProperty: "label"});
 			for (i = 0; i < 100; i++) {
				list.store.add({label: "Programmatic item of order " + i});
			}
			document.getElementById("list3Placeholder").appendChild(list);
			list.startup();
			

  			// Programmatic list: observable memory store, items added after the list startup and after adding the list to the document
			list = register.createElement("d-list");
			list.id = "list-prog-4";
			list.style.height = "200px";
			list.store = new ObservableStore({data: [], idProperty: "label"});
			list.startup();
			document.getElementById("list4Placeholder").appendChild(list);
  			for (i = 0; i < 100; i++) {
				list.store.add({label: "Programmatic item of order " + i});
			}

 			register.parse();


			document.getElementById("addButton").onclick = function () {
				var options = {}, beforeRenderer;
				var list = document.getElementById(document.getElementById("listId").value);
				var label = document.getElementById("labelInput").value;
				var righttext = document.getElementById("righttextInput").value;
				var item = {label: label, righttext: righttext};
				var index = document.getElementById("indexInput").value;
				index = index ? parseInt(index) : null;
				
				if (index !== null) {
					beforeRenderer = list.getItemRendererByIndex(index);
					if (beforeRenderer) {
						options.before = beforeRenderer.item;
					}
				}
				
				list.store.add(item, options);
			};

			document.getElementById("removeButton").onclick = function () {
				var list = document.getElementById(document.getElementById("listId").value);
				var index = document.getElementById("indexInput").value;
				index = index ? parseInt(index) : null;
				list.store.remove(list.store.getIdentity(list.getItemRendererByIndex(index).item));
			};

		});
	</script>
	<style>
		html {
			width: 100%;
			margin: 0;
			padding: 0;
		}
		
		body {
			font-family: Helvetica;
			font-size: 17px;
			background-color: #c5ccd3;
		}
	</style>
</head>
<body>
 	<input type="text" autofocus>
 	<br>
 	<h1>Programmatic lists</h1>
 	<h2>Default store, items added before adding the list to the document and before startup (id: list-prog-1)</h2>
 	<div id="list1Placeholder"></div>
 	<h2>Default store, items added after the list startup and after adding the list to the document (id: list-prog-2)</h2>
 	<div id="list2Placeholder"></div>
 	<h2>Memory store, items added before adding the list to the document and before startup (id: list-prog-3)</h2>
 	<div id="list3Placeholder"></div>
 	<h2>Observable Memory store, items added after the list startup and after adding the list to the document (id: list-prog-4)</h2>
 	<div id="list4Placeholder"></div>
    <h1>Markup lists</h1>
    <h2>10 items declared as markup, memory store, and selectionMode set to "multiple" (id: list-mark-1)</h2>
	<d-list id="list-mark-1" style="height: 200px" selectionMode="multiple" store="globalStore">
		<d-list-store>
			<d-list-store-item item="{label: 'list item 0', righttext: 'right text 1'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 1', righttext: 'right text 2'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 2', righttext: 'right text 3'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 3', righttext: 'right text 4'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 4', righttext: 'right text 5'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 5', righttext: 'right text 6'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 6', righttext: 'right text 7'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 7', righttext: 'right text 8'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 8', righttext: 'right text 9'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 9', righttext: 'right text 10'}"></d-list-store-item>
		</d-list-store>
	</d-list>
    <h2>Non scrollable with 10 items declared as markup, default store (id: list-mark-2)</h2>
	<d-list id="list-mark-2" scrollDirection="none">
		<d-list-store>
			<d-list-store-item item="{label: 'list item 0', righttext: 'right text 1'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 1', righttext: 'right text 2'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 2', righttext: 'right text 3'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 3', righttext: 'right text 4'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 4', righttext: 'right text 5'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 5', righttext: 'right text 6'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 6', righttext: 'right text 7'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 7', righttext: 'right text 8'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 8', righttext: 'right text 9'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 9', righttext: 'right text 10'}"></d-list-store-item>
		</d-list-store>
	</d-list>
   	<h2>10 items declared as markup, default store, categorized (id: list-mark-3)</h2>
	<d-list id="list-mark-3" style="height: 200px" categoryAttr="righttext">
		<d-list-store>
			<d-list-store-item item="{label: 'list item 0', righttext: 'A'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 1', righttext: 'A'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 2', righttext: 'A'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 3', righttext: 'A'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 4', righttext: 'A'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 5', righttext: 'B'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 6', righttext: 'B'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 7', righttext: 'B'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 8', righttext: 'B'}"></d-list-store-item>
			<d-list-store-item item="{label: 'list item 9', righttext: 'B'}"></d-list-store-item>
		</d-list-store>
	</d-list>
	<div style="height: 350px;">
	</div>
	<div style="border-top: 1px white; position: fixed; bottom: 0px; z-index: 10; background: #c5ccd3; width: 100%">
		<table style="width: 100%;">
			<tr style="width: 100%;">
				<td><h3>Add / Remove elements in list stores:</h3></td>
				<td align=right><button onclick="document.getElementById('functionPanel').style.display = (this.innerHTML === 'Hide panel' ? 'none' : 'block'); this.innerHTML = (this.innerHTML === 'Hide panel' ? 'Show panel' : 'Hide panel');">Hide panel</button></td>
			</tr>
		<table id="functionPanel">
			<tr>
				<td>List id:</td>
				<td>
					<select id="listId">
						<option value="list-prog-1">list-prog-1</option>
						<option value="list-prog-2">list-prog-2</option>
						<option value="list-prog-3">list-prog-3</option>
						<option value="list-prog-4">list-prog-4</option>
						<option value="list-mark-1">list-mark-1</option>
						<option value="list-mark-2">list-mark-2</option>
						<option value="list-mark-3">list-mark-3</option>
					</select>
				</td>
				<td>List id:</td><td><input id="idInput" type="text" value="list-mark-4"></td>
			</tr>
			<tr>
				<td>New item label / right text (category):</td><td><input id="labelInput" type="text" value="new item A"> / <input id="righttextInput" type="text" value="Category 1"></td>
			</tr>
			<tr>
				<td>Index:</td><td><input id="indexInput" type="number"></td>
			</tr>
			<tr>
				<td></td><td><button id="addButton">add item to List.store (at index)</button></td>
			</tr>
			<tr>
				<td></td><td><button id="removeButton">remove item at index from List.store</button></td>
			</tr>
		</table>
	</div>
</body>
</html>
